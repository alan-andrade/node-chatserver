// Generated by CoffeeScript 1.3.1
(function() {
  var io;

  io = require('socket.io').listen(8080);

  io.sockets.on('connection', function(socket) {
    socket.on('nickname', function(name) {
      return socket.set('nickname', name.nick, function() {
        var params;
        params = {
          name: name.nick
        };
        socket.broadcast.emit('nickname', params);
        return socket.emit('nickname', params);
      });
    });
    socket.on('message', function(msg, fn) {
      socket.broadcast.emit('message', {
        body: msg.body
      });
      fn();
    });
  });

}).call(this);
